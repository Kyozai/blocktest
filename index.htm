<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blockly Game</title>
    <script src="https://unpkg.com/blockly/blockly_compressed.js"></script>
</head>
<body>
    <h1>Blockly Game</h1>
    <button id="runButton">実行</button>
    <div id="blocklyDiv" style="height: 480px; width: 600px;"></div>
    <div id="output"></div>
    <xml id="toolbox" style="display:none">
        <block type="math_number">
            <field name="NUM">0</field>
        </block>
        <block type="math_arithmetic">
            <field name="OP">ADD</field>
            <value name="A">
                <shadow type="math_number">
                    <field name="NUM">1</field>
                </shadow>
            </value>
            <value name="B">
                <shadow type="math_number">
                    <field name="NUM">1</field>
                </shadow>
            </value>
        </block>
        <block type="text">
            <field name="TEXT"></field>
        </block>
        <block type="text_print"></block>
    </xml>
    <script>
        var workspace = Blockly.inject('blocklyDiv',
            {toolbox: document.getElementById('toolbox')});
        var runButton = document.getElementById('runButton');
        var outputDiv = document.getElementById('output');
        
        runButton.addEventListener('click', function() {
            var code = Blockly.JavaScript.workspaceToCode(workspace);
            eval(code);
        });
        
        function printOutput(text) {
            outputDiv.innerHTML = text;
        }
    </script>
</body>
</html>
